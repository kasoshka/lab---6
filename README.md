# Lab 6 — Refactoring & Code Smells

## Обнаруженные проблемы качества (code smells)
- Использование числовых значений без пояснений в расчётах налогов и скидок.
- Функция обработки заказа process_checkout имела чрезмерную нагрузку и объединяла множество различных операций
- Наличие повторяющихся фрагментов кода для проверок и вычислений внутри одного блока
- Запутанная структура: логика валидации, подсчётов и формирования идентификатора перемешаны.

## Применённые приёмы рефакторинга
- Улучшена читаемость: `process_checkout` стала короткой и читается как последовательность шагов.
- Структурирование параметров - все используемые в расчётах значения вынесены в отдельный блок с понятными именами
- **Extract Function (Выделение функции):** вынесены отдельные функции для:
  
1) Обработки входной информации

2) Проверки корректности данных

3) Определения суммы товаров

4) Вычисления доступных скидок

5) Расчёта налоговых отчислений

6) Создания уникального кода заказа


## Результаты преобразований
После проведения серии структурных изменений были достигнуты значительные улучшения в организации кодовой базы. Механизм применения скидок был переработан в модульный формат, что обеспечило его автономность от остальных этапов обработки заказа. Это позволяет вносить изменения в правила предоставления скидок, не затрагивая смежные компоненты системы. Каждый отдельный компонент, отвечающий за проверку или выполнение вычислений, был изолирован, что открывает возможности для более эффективного и целенаправленного модульного тестирования. Кроме того, корректировка любых параметров расчётов теперь выполняется исключительно через изменение значений в централизованном месте, что минимизирует риск возникновения ошибок при обновлении бизнес-логики и значительно упрощает процесс сопровождения кода в долгосрочной перспективе.

##Тестирование
В рамках валидации проведённых изменений была выполнена полная проверка работоспособности системы с использованием существующего набора тестов. Все автоматизированные проверки, содержащиеся в файле test_order_processing.py, продолжают стабильно выполняться и проходить без каких-либо ошибок или сбоев после внесения структурных преобразований. Это подтверждает, что рефакторинг не повлиял на внешнее поведение системы и не нарушил её функциональную корректность.
